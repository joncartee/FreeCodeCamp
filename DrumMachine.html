<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Drum Machine</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.21.1/babel.min.js"></script>
    <script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script>
    <meta charset="UTF-8" />
    <link
      href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Ubuntu", sans-serif;
        background: #f1d998;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }
      #app {
        width: 95%;
        margin: 1% auto;
        padding: 1% 0;
        background: #92b2b5;
        border-radius: 5px;
      }
      #display {
        width: 95%;
        margin: 1% auto;
        padding: 1% 0;
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
      }
    </style>
  </head>
  <body>
    <div id="app"></div>
    <script type="text/babel">
      class Drum extends React.Component {
        constructor(props) {
          super(props);
          this.state = {};
          this.playSound = this.playSound.bind(this);
          this.handleKeyPress = this.handleKeyPress.bind(this);
        }

        componentDidMount() {
          document.addEventListener("keydown", this.handleKeyPress);
        }
        componentWillUnmount() {
          document.removeEventListener("keydown", this.handleKeyPress);
        }
        handleKeyPress(e) {
          if (e.keyCode == this.props.keyCode) this.playSound();
        }
        playSound(e) {
          console.log(this);
          const sound = document.getElementById(this.props.keyTrigger);
          document.getElementById("display").innerHTML = this.props.id;
          sound.play();
        }
        render() {
          return (
            <button
              className="drum-pad"
              onClick={this.playSound}
              id={this.props.id}
            >
              {this.props.keyTrigger}
              <audio
                className="clip"
                id={this.props.keyTrigger}
                src={this.props.src}
              >
                {this.props.keyTrigger}
              </audio>
            </button>
          );
        }
      }

      class App extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            display: " "
          };
          this.onChange = this.onChange.bind(this);
        }
        onChange(e) {
          this.setstate({});
        }

        render() {
          return (
            <div id="drum-machine">
              <h1>drum-machine</h1>
              <div id="display">{this.state.display}</div>
              <Drum
                onClick={this.clicked}
                keyCode="81"
                keyTrigger="Q"
                id="Heater-1"
                src="https://s3.amazonaws.com/freecodecamp/drums/Heater-1.mp3"
              />
              <Drum
                keyCode="87"
                keyTrigger="W"
                id="Heater-2"
                src="https://s3.amazonaws.com/freecodecamp/drums/Heater-2.mp3"
              />
              <Drum
                keyCode="69"
                keyTrigger="E"
                id="Heater-3"
                src="https://s3.amazonaws.com/freecodecamp/drums/Heater-3.mp3"
              />
              <Drum
                keyCode="65"
                keyTrigger="A"
                id="Heater-4"
                src="https://s3.amazonaws.com/freecodecamp/drums/Heater-4_1.mp3"
              />
              <Drum
                keyCode="83"
                keyTrigger="S"
                id="Clap"
                src="https://s3.amazonaws.com/freecodecamp/drums/Heater-6.mp3"
              />
              <Drum
                keyCode="68"
                keyTrigger="D"
                id="Open-HH"
                src="https://s3.amazonaws.com/freecodecamp/drums/Dsc_Oh.mp3"
              />
              <Drum
                keyCode="90"
                keyTrigger="Z"
                id="Kick-n'-Hat"
                src="https://s3.amazonaws.com/freecodecamp/drums/Kick_n_Hat.mp3"
              />
              <Drum
                keyCode="88"
                keyTrigger="X"
                id="Kick"
                src="https://s3.amazonaws.com/freecodecamp/drums/RP4_KICK_1.mp3"
              />
              <Drum
                keyCode="67"
                keyTrigger="C"
                id="Closed-HH"
                src="https://s3.amazonaws.com/freecodecamp/drums/Cev_H2.mp3"
              />
            </div>
          );
        }
      }

      ReactDOM.render(<App />, document.getElementById("app"));
    </script>
  </body>
</html>
